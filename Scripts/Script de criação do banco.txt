CREATE DATABASE rastrodb;

CREATE TABLE Animal (numero_identificacao SERIAL NOT NULL, nome_animal varchar(40), data_nascimento_animal date NOT NULL, sexo_animal char(1) NOT NULL, identificacao_mae int4, identificacao_pai int4, id_inventario int4 NOT NULL, PRIMARY KEY (numero_identificacao));
COMMENT ON COLUMN Animal.numero_identificacao IS 'Número de identificação do animal';
COMMENT ON COLUMN Animal.nome_animal IS 'Nome/Apelido do animal';
COMMENT ON COLUMN Animal.data_nascimento_animal IS 'Data de nascimento do animal';
COMMENT ON COLUMN Animal.sexo_animal IS 'Sexo do animal';

CREATE TABLE Inventario (id_inventario SERIAL NOT NULL, email_usuario varchar(40) NOT NULL, PRIMARY KEY (id_inventario));
COMMENT ON COLUMN Inventario.id_inventario IS 'ID do inventário';

CREATE TABLE Raca (id_raca SERIAL NOT NULL, nome_raca varchar(40) NOT NULL UNIQUE, PRIMARY KEY (id_raca));
COMMENT ON COLUMN Raca.id_raca IS 'Identificação da raça';
COMMENT ON COLUMN Raca.nome_raca IS 'Nome da raça';

CREATE TABLE Raca_Animal (id_raca int4 NOT NULL, numero_identificacao int4 NOT NULL, PRIMARY KEY (id_raca, numero_identificacao));

CREATE TABLE Usuario (email_usuario varchar(40) NOT NULL, senha_usuario varchar(40) NOT NULL, PRIMARY KEY (email_usuario));
COMMENT ON COLUMN Usuario.email_usuario IS 'Email do usuário';
COMMENT ON COLUMN Usuario.senha_usuario IS 'Senha do usuário';


ALTER TABLE Inventario ADD CONSTRAINT FKInventario489239 FOREIGN KEY (email_usuario) REFERENCES Usuario (email_usuario);
ALTER TABLE Animal ADD CONSTRAINT FKAnimal52111 FOREIGN KEY (id_inventario) REFERENCES Inventario (id_inventario);
ALTER TABLE Raca_Animal ADD CONSTRAINT FKRaca_Anima33698 FOREIGN KEY (numero_identificacao) REFERENCES Animal (numero_identificacao);
ALTER TABLE Raca_Animal ADD CONSTRAINT FKRaca_Anima262382 FOREIGN KEY (id_raca) REFERENCES Raca (id_raca);
ALTER TABLE Animal ADD CONSTRAINT FKAnimal48536 FOREIGN KEY (identificacao_pai) REFERENCES Animal (numero_identificacao);
ALTER TABLE Animal ADD CONSTRAINT FKAnimal51423 FOREIGN KEY (identificacao_mae) REFERENCES Animal (numero_identificacao);
